# Docker Compose - Local Development Override
#
# Purpose:
# - Expose service ports on localhost (no Traefik required)
# - Use localhost URLs for Directus/Frontend/API where applicable
#
# Usage:
#   docker compose -f docker-compose.yml -f docker-compose.dev.yml up -d --build

services:
  db:
    ports:
      - "5432:5432"

  directus:
    environment:
      # Local Directus base URL (used in Admin UI links)
      PUBLIC_URL: "http://localhost:8055"
    ports:
      - "8055:8055"

  api:
    environment:
      NODE_ENV: "development"
      LOG_LEVEL: "debug"
      # Allow local frontend origin
      CORS_ORIGIN: "http://localhost:3000"
    ports:
      - "3001:3001"

  frontend:
    build:
      args:
        NEXT_PUBLIC_API_URL: "http://localhost:3001"
        NEXT_PUBLIC_DIRECTUS_URL: "http://localhost:8055"
    environment:
      NODE_ENV: "development"
      NEXT_PUBLIC_API_URL: "http://localhost:3001"
      NEXT_PUBLIC_DIRECTUS_URL: "http://localhost:8055"
    ports:
      - "3000:3000"

