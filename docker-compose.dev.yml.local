# Docker Compose - Local Development Override
# 
# Überschreibt Ports für lokale Entwicklung
# Frontend: 3002, API: 3003, Directus: 8055, Database: 5434
# 
# Portkonventionen: Siehe /MOJO/PORT-CONVENTIONS.md
# 
# Verwendung: docker compose -f docker-compose.yml -f docker-compose.dev.yml.local up -d

services:
  # LMS API (Fastify) - Port 3003
  api:
    ports:
      - "3003:3001"
    # Traefik-Labels werden für lokale Entwicklung nicht benötigt

  # Next.js Frontend - Port 3002
  frontend:
    ports:
      - "3002:3000"
    environment:
      NEXT_PUBLIC_API_URL: ${NEXT_PUBLIC_API_URL:-http://localhost:3003}
      NEXT_PUBLIC_DIRECTUS_URL: ${NEXT_PUBLIC_DIRECTUS_URL:-http://localhost:8055}
    # Traefik-Labels werden für lokale Entwicklung nicht benötigt

  # Directus CMS - Port 8055
  directus:
    ports:
      - "8055:8055"
    environment:
      PUBLIC_URL: ${DIRECTUS_PUBLIC_URL:-http://localhost:8055}
    # Traefik-Labels werden für lokale Entwicklung nicht benötigt

  # PostgreSQL Database - Port 5434 (gemäß PORT-CONVENTIONS.md)
  db:
    ports:
      - "5434:5432"  # 5434 lokal, um Konflikte zu vermeiden (payments.mojo nutzt 5433)

